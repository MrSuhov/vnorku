# –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –°—Ç–∞—Ç—É—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (UserStatus)

### 1. üìû WAITING_CONTACT
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ /initiate –∏–ª–∏ /start  
**–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–º"  
**–ü–µ—Ä–µ—Ö–æ–¥:** ‚Üí WAITING_ADDRESS (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞)

### 2. üìç WAITING_ADDRESS  
**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–∂–∏–¥–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏  
**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞  
**–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç –∫–∞–∫ –∞–¥—Ä–µ—Å  
**–ü–µ—Ä–µ—Ö–æ–¥:** ‚Üí ACTIVE (–ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞)

### 3. ‚úÖ ACTIVE
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–∫—Ç–∏–≤–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–µ—Ä–≤–∏—Å–æ–º  
**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞  
**–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –õ–°–î –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
**–ü–µ—Ä–µ—Ö–æ–¥:** ‚Üí REGISTERED (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ö–æ—Ç—è –±—ã –≤ –æ–¥–Ω–æ–º –õ–°–î)

### 4. üéâ REGISTERED
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –õ–°–î, –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã  
**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –õ–°–î  
**–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –õ–°–î (–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏—Ö –õ–°–î)  
**–ü–µ—Ä–µ—Ö–æ–¥:** –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

### 5. üö´ BLOCKED
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º  
**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** –í—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º  
**–î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:** –£–≤–µ–¥–æ–º–∏—Ç—å –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ  
**–ü–µ—Ä–µ—Ö–æ–¥:** ‚Üí ACTIVE/REGISTERED (–≤—Ä—É—á–Ω—É—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)

---

## –°—Ö–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

```
/initiate –∏–ª–∏ /start
    ‚Üì
WAITING_CONTACT ‚Üí (–ø–æ–ª—É—á–µ–Ω –∫–æ–Ω—Ç–∞–∫—Ç) ‚Üí WAITING_ADDRESS ‚Üí (–ø–æ–ª—É—á–µ–Ω –∞–¥—Ä–µ—Å) ‚Üí ACTIVE ‚Üí (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –õ–°–î) ‚Üí REGISTERED
                                                                           ‚Üì
                                                                        BLOCKED (–∞–¥–º–∏–Ω)
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ª–∏—á–∫–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏:
1. **SMS –∫–æ–¥** - –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥ SMS (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1)
2. **–ê–¥—Ä–µ—Å** - –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å = WAITING_ADDRESS
3. **–ü–æ —Å—Ç–∞—Ç—É—Å—É:**
   - BLOCKED ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ
   - WAITING_CONTACT ‚Üí –∑–∞–ø—Ä–æ—Å –∫–æ–Ω—Ç–∞–∫—Ç–∞
   - WAITING_ADDRESS ‚Üí –∑–∞–ø—Ä–æ—Å –∞–¥—Ä–µ—Å–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
   - ACTIVE/REGISTERED ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –õ–°–î
   - –î—Ä—É–≥–æ–π ‚Üí –æ—à–∏–±–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

---

## –ö–æ–º–∞–Ω–¥—ã

### /start
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—Å—Ç—å –≤ –ë–î —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –õ–°–î –∫–Ω–æ–ø–∫–∏
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –∏–ª–∏ –Ω–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞ ‚Üí —Å–æ–∑–¥–∞—Ç—å —Å WAITING_CONTACT –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

### /status
- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω (–∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥—Ä–µ—Å (–ø–µ—Ä–≤—ã–µ 50 —Å–∏–º–≤–æ–ª–æ–≤)
- –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –õ–°–î
- –î–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –¥–µ–π—Å—Ç–≤–∏—é

### /initiate (—Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–∞—Ö)
- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å WAITING_CONTACT
- –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø–µ—Ä–µ–π—Ç–∏ –≤ –ª–∏—á–∫—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

### /browse
- –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –õ–°–î —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ –∫—É–∫–∞–º–∏
- –û—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∫—É–∫–∞–º–∏

---

## –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (filters.CONTACT)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–∞–∫—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –ë–î
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å WAITING_ADDRESS
- –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∞–¥—Ä–µ—Å

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (filters.TEXT)
- **–í –≥—Ä—É–ø–ø–µ:** –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤
- **–í –ª–∏—á–∫–µ:** 
  1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SMS –æ–∂–∏–¥–∞–Ω–∏–µ
  2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∏ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ

### Callback Query (–∫–Ω–æ–ø–∫–∏)
- `auth_{lsd_name}_{user_id}` ‚Üí –∑–∞–ø—É—Å–∫ RPA –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `browse_{lsd_name}` ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä —Å –∫—É–∫–∞–º–∏
- `order_*` ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤

---

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ users
```sql
- telegram_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- phone (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- address (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL)
- status (enum: waiting_contact, waiting_address, active, registered, blocked)
- region (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 'moscow')
```

### –¢–∞–±–ª–∏—Ü–∞ user_sessions
```sql
- telegram_id
- lsd_config_id (—Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥ –õ–°–î)
- data (JSON —Å –∫—É–∫–∞–º–∏)
- expires_at
```

---

## –í–∞–ª–∏–¥–∞—Ü–∏—è

### –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ DaData API
- –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —É—Ç–æ—á–Ω–∏—Ç—å
- –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø—Ä–∏–Ω—è—Ç—å –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –¢–µ–ª–µ—Ñ–æ–Ω
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram Contact
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—é

---

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏:
- üì® - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üìû - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- üìç - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥—Ä–µ—Å–∞
- üîê - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ - —É—Å–ø–µ—Ö
- ‚ùå - –æ—à–∏–±–∫–∞
- üîç - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
