# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ—Å—Ç–∞–≤–∫–µ –≤ PDF

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–í PDF-–æ—Ç—á—ë—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –æ –¥–æ—Å—Ç–∞–≤–∫–µ –∏–∑ `lsd_configs.delivery_cost_model` –≤–º–µ—Å—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏–∑ `lsd_stocks.delivery_cost_model`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1Ô∏è‚É£ SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –º–æ–Ω–æ–∫–æ—Ä–∑–∏–Ω (`get_mono_baskets.sql`)
- ‚ùå –ë—ã–ª–æ: `lc.delivery_cost_model` (–∏–∑ `lsd_configs`)
- ‚úÖ –°—Ç–∞–ª–æ: `bc.delivery_cost_model` (–∏–∑ `basket_combinations`, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏–∑ `lsd_stocks`)

### 2Ô∏è‚É£ SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ª—É—á—à–µ–π –∫–æ—Ä–∑–∏–Ω—ã (`pdf_generator.py`)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ `delivery_cost_model` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ LSD –≤ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –∏–∑ `basket_combinations` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `lsd_config_id`

### 3Ô∏è‚É£ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ PDF
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º" –≤ "–õ—É—á—à—É—é –∫–æ—Ä–∑–∏–Ω—É"
- –£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ LSD –æ—Ç–¥–µ–ª—å–Ω–æ

### 4Ô∏è‚É£ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω—ã INFO-–ª–æ–≥–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `delivery_cost_model`
- –î–æ–±–∞–≤–ª–µ–Ω—ã WARNING-–ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω—ã DEBUG-–ª–æ–≥–∏ –≤ –º–µ—Ç–æ–¥ `_parse_delivery_model()`

## üìä –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
RPA Search ‚Üí lsd_stocks.delivery_cost_model 
           ‚Üí basket_combinations.delivery_cost_model 
           ‚Üí PDF –æ—Ç—á—ë—Ç
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–∏—Å–∫
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   - `üìä [Best Basket] Using delivery_cost_model from basket_combinations`
   - `üìä [Mono Basket] Using delivery_cost_model from basket_combinations`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PDF:
   - –†–∞–∑–¥–µ–ª "–õ—É—á—à–∞—è –∫–æ—Ä–∑–∏–Ω–∞" ‚Üí "–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º"
   - –†–∞–∑–¥–µ–ª "–ú–æ–Ω–æ–∫–æ—Ä–∑–∏–Ω—ã" ‚Üí "–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏" –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ—Ä–∑–∏–Ω—ã
4. –°—Ä–∞–≤–Ω–∏—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –ë–î:
   ```sql
   SELECT lsd_config_id, delivery_cost_model 
   FROM basket_combinations 
   WHERE order_id = <order_id>;
   ```

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `services/order-service/sql/get_mono_baskets.sql`
2. `services/order-service/pdf_generator.py`

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: `PDF_DELIVERY_FIX_2025-10-10.md`
