# –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π PDF (v2)

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ 1. –í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ –†–∞–∑–¥–µ–ª–µ 1
- [ ] –í —Ç–∞–±–ª–∏—Ü–µ –†–∞–∑–¥–µ–ª–∞ 1 –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç **–í–°–ï** —Ç–æ–≤–∞—Ä—ã –∏–∑ –∑–∞–∫–∞–∑–∞
- [ ] –¢–æ–≤–∞—Ä—ã —Å –Ω—É–ª–µ–≤—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏ (loss=0) –ø–æ–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–≤—ã–º–∏
- [ ] –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä "–Ø–π—Ü–∞" –±—ã–ª –≤ –∑–∞–∫–∞–∑–µ, –æ–Ω —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –≤ —Ç–∞–±–ª–∏—Ü–µ

### ‚úÖ 2. –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —Ç–∞–±–ª–∏—Ü
- [ ] **–†–∞–∑–¥–µ–ª 0**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã - –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ—Ä–æ–º —Ñ–æ–Ω–µ
- [ ] **–†–∞–∑–¥–µ–ª 1**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã - –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ—Ä–æ–º —Ñ–æ–Ω–µ
- [ ] **–†–∞–∑–¥–µ–ª 2**: –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Ç–∞–±–ª–∏—Ü—ã - –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ—Ä–æ–º —Ñ–æ–Ω–µ
- [ ] –¢–µ–∫—Å—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —á–µ—Ç–∫–æ –≤–∏–¥–µ–Ω –∏ —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ—Ç—Å—è

### ‚úÖ 3. –ê–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ –∏–º–µ–Ω–∞ –õ–°–î –≤ –†–∞–∑–¥–µ–ª–µ 1
- [ ] –ö–æ–ª–æ–Ω–∫–∞ "–°–µ—Ä–≤–∏—Å" —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- [ ] –ü—Ä–∏–º–µ—Ä—ã: `yandex_lavka`, `samokat`, `sbermarket`, `perekrestok`
- [ ] –ù–µ—Ç —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π —Ç–∏–ø–∞ "–Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞" –∏–ª–∏ "–°–∞–º–æ–∫–∞—Ç"

### ‚úÖ 4. –£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –†–∞–∑–¥–µ–ª–µ 2
- [ ] –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ "–í–°–ï–ì–û: X —Ä—É–± | –ò—Ç–æ–≥–æ –ø–æ—Ç–µ—Ä—å –∏ –¥–æ—Å—Ç–∞–≤–æ–∫: Y —Ä—É–±"
- [ ] –ï—Å—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ **"–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏:"**
- [ ] –ü–æ–∫–∞–∑–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –ü–æ–∫–∞–∑–∞–Ω—ã –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- [ ] –§–æ—Ä–º–∞—Ç: "–û—Ç X —Ä—É–±: Y —Ä—É–±" –∏–ª–∏ "–û—Ç X —Ä—É–±: –±–µ—Å–ø–ª–∞—Ç–Ω–æ"

### ‚úÖ 5. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏ –≤ –†–∞–∑–¥–µ–ª–µ 2
- [ ] –ö–æ–ª–æ–Ω–∫–∞ "–ü–æ—Ç–µ—Ä–∏" —Å–æ–¥–µ—Ä–∂–∏—Ç **–º–∞–ª—ã–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ** –∑–Ω–∞—á–µ–Ω–∏—è
- [ ] –ù–µ—Ç –±–æ–ª—å—à–∏—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª —Ç–∏–ø–∞ "-925.65"
- [ ] –§–æ—Ä–º—É–ª–∞: (fprice - fprice_min) √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- [ ] –ü—Ä–∏–º–µ—Ä: —Ä–∞–∑–Ω–∏—Ü–∞ 0.11 —Ä—É–±/–∫–≥ √ó 0.09 –∫–≥ = 0.01 —Ä—É–± ‚úÖ

---

## üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –†–∞–∑–¥–µ–ª 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ü–µ–Ω—ã

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã:**
```
–ó–∞–≥–æ–ª–æ–≤–∫–∏ (–±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ—Ä–æ–º):
1. –¢–æ–≤–∞—Ä –≤ –∑–∞–∫–∞–∑–µ
2. –°–µ—Ä–≤–∏—Å (–∞–Ω–≥–ª–æ—è–∑—ã—á–Ω–æ–µ!)
3. –õ—É—á—à–∞—è —Ü–µ–Ω–∞ (–∑–∞ –∫–≥|–ª)
4. –ï–¥. –∏–∑–º.
5. –ö–æ–ª-–≤–æ (–∫–≥|–ª)
6. –¶–µ–Ω–∞ –Ω–∞ –ø–æ–ª–∫–µ
7. –°—É–º–º–∞ –Ω–∞ –ø–æ–ª–∫–µ
8. –ö–æ–ª-–≤–æ –≤ –∑–∞–∫–∞–∑–µ
9. –ï–¥. –∏–∑–º. –≤ –∑–∞–∫–∞–∑–µ
10. –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:**
- [ ] –í—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∑–∞–∫–∞–∑–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –ö–æ–ª–æ–Ω–∫–∞ "–°–µ—Ä–≤–∏—Å": —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ –∏–º–µ–Ω–∞
- [ ] –ù–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

---

### –†–∞–∑–¥–µ–ª 2: –ú–æ–Ω–æ–∫–æ—Ä–∑–∏–Ω—ã

**–î–ª—è –ö–ê–ñ–î–û–ô –º–æ–Ω–æ–∫–æ—Ä–∑–∏–Ω—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
```
2.X. [–ù–∞–∑–≤–∞–Ω–∏–µ –õ–°–î] - [–°—É–º–º–∞] —Ä—É–±
```

**–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ (–±–µ–ª—ã–π —Ç–µ–∫—Å—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö):**
```
1. –¢–æ–≤–∞—Ä
2. –õ—É—á—à–∞—è —Ü–µ–Ω–∞ (–∑–∞ –∫–≥|–ª)
3. –¶–µ–Ω–∞ (–∑–∞ –∫–≥|–ª)
4. –ö–æ–ª-–≤–æ (–∫–≥|–ª)
5. –ï–¥.–∏–∑–º
6. –ö–æ–ª-–≤–æ —à—Ç—É–∫
7. –¶–µ–Ω–∞ –Ω–∞ –ø–æ–ª–∫–µ
8. –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ –ø–æ–ª–∫–µ
9. –ü–æ—Ç–µ—Ä–∏ ‚Üê –ü–†–û–í–ï–†–ò–¢–¨ –ó–ù–ê–ß–ï–ù–ò–Ø!
```

**–ò—Ç–æ–≥–∏:**
```
–ò—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä—ã: X —Ä—É–± | –¢–æ–ø–∞–ø: Y —Ä—É–± | –î–æ—Å—Ç–∞–≤–∫–∞: Z —Ä—É–± | –ü–æ—Ç–µ—Ä–∏: W —Ä—É–±
–í–°–ï–ì–û: [–°—É–º–º–∞] —Ä—É–± | –ò—Ç–æ–≥–æ –ø–æ—Ç–µ—Ä—å –∏ –¥–æ—Å—Ç–∞–≤–æ–∫: [–°—É–º–º–∞] —Ä—É–±
```

**–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ (–ù–û–í–û–ï!):**
```
–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏:
‚Ä¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞: X —Ä—É–±
‚Ä¢ –î–∏–∞–ø–∞–∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏:
  - –û—Ç 0.00 —Ä—É–±: 149.00 —Ä—É–±
  - –û—Ç 1000.00 —Ä—É–±: 99.00 —Ä—É–±
  - –û—Ç 2000.00 —Ä—É–±: –±–µ—Å–ø–ª–∞—Ç–Ω–æ
```

---

## üßÆ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ—Ç–µ—Ä—å (–∫—Ä–∏—Ç–∏—á–Ω–æ!)

**–§–æ—Ä–º—É–ª–∞:** `loss = (fprice - fprice_min) √ó quantity`

**–ü—Ä–∏–º–µ—Ä 1:**
```
fprice = 1011.76 —Ä—É–±/–∫–≥
fprice_min = 1011.65 —Ä—É–±/–∫–≥
quantity = 0.09 –∫–≥
loss = (1011.76 - 1011.65) √ó 0.09 = 0.11 √ó 0.09 = 0.0099 ‚âà 0.01 —Ä—É–± ‚úÖ
```

**–ü—Ä–∏–º–µ—Ä 2:**
```
fprice = 150.00 —Ä—É–±/–∫–≥
fprice_min = 145.00 —Ä—É–±/–∫–≥
quantity = 0.5 –∫–≥
loss = (150.00 - 145.00) √ó 0.5 = 5.00 √ó 0.5 = 2.50 —Ä—É–± ‚úÖ
```

**–ß—Ç–æ –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚ùå –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞: `-925.65`
- ‚ùå –ë–æ–ª—å—à–∏–µ —á–∏—Å–ª–∞ –ø—Ä–∏ –º–∞–ª—ã—Ö —Ä–∞–∑–Ω–∏—Ü–∞—Ö —Ü–µ–Ω
- ‚ùå –ù—É–ª–µ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏

---

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: –¢–æ–≤–∞—Ä—ã –ø—Ä–æ–ø–∞–¥–∞—é—Ç
- **–ü—Ä–∏—á–∏–Ω–∞:** SQL –≤—Å–µ –µ—â–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `loss = 0`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª `get_min_prices.sql`

### –û—à–∏–±–∫–∞ 2: –ß–µ—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö
- **–ü—Ä–∏—á–∏–Ω–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bold_style` –≤–º–µ—Å—Ç–æ `table_header_style`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ `items_table_data` –≤ `pdf_generator.py`

### –û—à–∏–±–∫–∞ 3: –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –õ–°–î
- **–ü—Ä–∏—á–∏–Ω–∞:** SQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `display_name` –≤–º–µ—Å—Ç–æ `lsd_name`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `get_min_prices.sql`

### –û—à–∏–±–∫–∞ 4: –£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ª–µ `delivery_cost_model` –ø—É—Å—Ç–æ–µ –∏–ª–∏ None
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –õ–°–î

### –û—à–∏–±–∫–∞ 5: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏
- **–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ä–∞—è —Ñ–æ—Ä–º—É–ª–∞ –≤—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥ `_create_section2_mono_baskets`

---

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–µ–±–∞–≥–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –≤—ã–±–∏—Ä–∞—é—Ç—Å—è
SELECT 
    oi.id,
    oi.product_name,
    COUNT(bc.id) as combinations_count,
    MIN(bc.loss) as min_loss
FROM order_items oi
LEFT JOIN basket_combinations bc ON bc.order_item_id = oi.id
WHERE oi.order_id = 25  -- –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞
GROUP BY oi.id, oi.product_name
ORDER BY oi.product_name;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–æ—Å—Ç–∞–≤–∫–∏:
```sql
SELECT 
    lsd_name,
    delivery_cost_model
FROM lsd_configs
WHERE delivery_cost_model IS NOT NULL;
```

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É–±–µ–¥–∏—Ç–µ—Å—å:
- [ ] –í—Å–µ 5 –ø—Ä–æ–±–ª–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã
- [ ] –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

---

## üìû –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `tail -f /Users/ss/GenAI/korzinka/logs/order-service.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ order-service –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ (—Å—Ç–∞—Ä—ã–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î
