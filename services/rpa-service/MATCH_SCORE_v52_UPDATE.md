# Match Score Algorithm Update v5.2

## –î–∞—Ç–∞: 27 —Å–µ–Ω—Ç—è–±—Ä—è 2025

## –ü—Ä–æ–±–ª–µ–º–∞
–ê–ª–≥–æ—Ä–∏—Ç–º v3.0 –¥–∞–≤–∞–ª —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π match_score –¥–ª—è –Ω–µ–ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤:
- "–ª–æ—Å–æ—Å—å —Å–ª–∞–±–æ—Å–æ–ª–µ–Ω–∞—è —Ä—É—Å—Å–∫–æ–µ –º–æ—Ä–µ" vs "–°–µ–ª—å–¥—å –≤ –º–∞—Å–ª–µ –ê-–ª—è –ª–æ—Å–æ—Å—å –†—É—Å—Å–∫–æ–µ –º–æ—Ä–µ" ‚Üí **0.85** (–¥–æ–ª–∂–Ω–æ ~0.5)
- –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ (–≥–ª–∞–≤–Ω–æ–≥–æ) —Å–ª–æ–≤–∞

## –†–µ—à–µ–Ω–∏–µ v5.2

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à—Ç—Ä–∞—Ñ –∑–∞ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —Å–ª–æ–≤–∞** (–ù–û–í–û–ï)
   - –ï—Å–ª–∏ –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –∑–∞–ø—Ä–æ—Å–∞ –ù–ï –≤ —Ç–æ–ø-3 –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ:
     - –í–°–ï —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã (100% –ø–æ–∫—Ä—ã—Ç–∏–µ) ‚Üí —à—Ç—Ä–∞—Ñ **-0.25** (–º—è–≥–∫–∏–π)
     - –ù–ï –≤—Å–µ —Å–ª–æ–≤–∞ –Ω–∞–π–¥–µ–Ω—ã ‚Üí —à—Ç—Ä–∞—Ñ **-0.45** (–∂–µ—Å—Ç–∫–∏–π)
   - –ï—Å–ª–∏ –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –í —Ç–æ–ø-3, –Ω–æ –Ω–µ –ø–µ—Ä–≤–æ–µ:
     - –í—ã—Å–æ–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (‚â•90%) ‚Üí —à—Ç—Ä–∞—Ñ **-0.15**
     - –ù–∏–∑–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (<90%) ‚Üí —à—Ç—Ä–∞—Ñ **-0.25**

2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã**
   - –ë–æ–Ω—É—Å—ã –∑–∞ –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∏ —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –¥–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ `penalty < 0.5`
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ 0.7 –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¢–û–õ–¨–ö–û –ø—Ä–∏ `penalty < 0.3`

3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**
   - –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
   - "—á–µ—Ä—Ä–∏," —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç—Å—è –∫–∞–∫ "—á–µ—Ä—Ä–∏"

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–µ–π—Å | –ó–∞–ø—Ä–æ—Å | –ù–∞–π–¥–µ–Ω–Ω–æ–µ | –ë—ã–ª–æ v3.0 | –°—Ç–∞–ª–æ v5.2 | –°—Ç–∞—Ç—É—Å |
|------|--------|-----------|-----------|------------|--------|
| 1 | –ª–æ—Å–æ—Å—å —Å–ª–∞–±–æ—Å–æ–ª–µ–Ω–∞—è —Ä—É—Å—Å–∫–æ–µ –º–æ—Ä–µ | –°–µ–ª—å–¥—å –≤ –º–∞—Å–ª–µ –ê-–ª—è –ª–æ—Å–æ—Å—å... | 0.825 | **0.575** | ‚úÖ (‚â§0.6) |
| 2 | —á–µ—Ä—Ä–∏ | –¢–æ–º–∞—Ç—ã —á–µ—Ä—Ä–∏ | 1.000 | **1.000** | ‚úÖ (‚â•0.8) |
| 3 | —á–µ—Ä—Ä–∏ | –°–µ–º–µ–Ω–∞ —Ç–æ–º–∞—Ç...–ß–µ—Ä—Ä–∏ | 0.000 | **0.450** | ‚úÖ (‚â§0.5) |
| 4 | —á–µ—Ä–∫–∏–∑–æ–≤–æ —Å–∞–ª—å—á–∏—á–æ–Ω | –ö–æ–ª–±–∞—Å–∞ —Å—ã—Ä–æ–∫–æ–ø—á–µ–Ω–∞—è –°–∞–ª—å—á–∏—á–æ–Ω –ß–µ—Ä–∫–∏–∑–æ–≤–æ | 0.900 | **0.850** | ‚úÖ (0.7-0.9) |
| 5 | –º–æ–ª–æ–∫–æ | –ú–æ–ª–æ–∫–æ –ø–∞—Å—Ç–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–µ 3.2% | 1.000 | **1.000** | ‚úÖ |

**–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!** üéâ

## –ü—Ä–∏–º–µ—Ä—ã —Ä–∞—Å—á–µ—Ç–∞

### –ö–µ–π—Å 1: "–ª–æ—Å–æ—Å—å" vs "—Å–µ–ª—å–¥—å...–ª–æ—Å–æ—Å—å"
```
Search words: ['–ª–æ—Å–æ—Å—å', '—Å–ª–∞–±–æ—Å–æ–ª–µ–Ω–∞—è', '—Ä—É—Å—Å–∫–æ–µ', '–º–æ—Ä–µ']
Found words: ['—Å–µ–ª—å–¥—å', '–º–∞—Å–ª–µ', '–ª–æ—Å–æ—Å—å', '—Ä—É—Å—Å–∫–æ–µ', '–º–æ—Ä–µ']

base_score = 3/4 = 0.750 (3 —Å–ª–æ–≤–∞ –∏–∑ 4 –Ω–∞–π–¥–µ–Ω—ã)
penalty = -0.25 (–ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –Ω–∞ 3-–π –ø–æ–∑–∏—Ü–∏–∏, –Ω–æ –ø–æ–∫—Ä—ã—Ç–∏–µ 75%)
bonus = +0.075 (exact_ratio = 0.75)
final = 0.750 + 0.075 - 0.25 = 0.575 ‚úÖ
```

### –ö–µ–π—Å 4: "—á–µ—Ä–∫–∏–∑–æ–≤–æ —Å–∞–ª—å—á–∏—á–æ–Ω" vs "–ö–æ–ª–±–∞—Å–∞...–°–∞–ª—å—á–∏—á–æ–Ω...–ß–µ—Ä–∫–∏–∑–æ–≤–æ"
```
Search words: ['—á–µ—Ä–∫–∏–∑–æ–≤–æ', '—Å–∞–ª—å—á–∏—á–æ–Ω']
Found words: ['–∫–æ–ª–±–∞—Å–∞', '—Å—ã—Ä–æ–∫–æ–ø—á–µ–Ω–∞—è', '—Å–∞–ª—å—á–∏—á–æ–Ω', '—á–µ—Ä–∫–∏–∑–æ–≤–æ', ...]

base_score = 2/2 = 1.000 (100% –Ω–∞–π–¥–µ–Ω–æ)
penalty = -0.40 (-0.15 length + -0.25 –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ –Ω–µ –≤ —Ç–æ–ø-3, –Ω–æ 100% –ø–æ–∫—Ä—ã—Ç–∏–µ)
bonus = +0.25 (penalty < 0.5, –ø–æ—ç—Ç–æ–º—É –¥–∞–µ–º –±–æ–Ω—É—Å—ã)
final = 1.000 + 0.25 - 0.40 = 0.850 ‚úÖ
```

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. `/Users/ss/GenAI/korzinka/services/rpa-service/main.py`
   - –§—É–Ω–∫—Ü–∏—è `calculate_advanced_match_score()` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ v5.2

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

```bash
cd /Users/ss/GenAI/korzinka
./start_services.sh
```

–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑ —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏:
- –ª–æ—Å–æ—Å—å —Å–ª–∞–±–æ—Å–æ–ª–µ–Ω–∞—è —Ä—É—Å—Å–∫–æ–µ –º–æ—Ä–µ
- —á–µ—Ä—Ä–∏  
- —á–µ—Ä–∫–∏–∑–æ–≤–æ —Å–∞–ª—å—á–∏—á–æ–Ω

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
tail -f logs/rpa-service.log | grep "Score breakdown v5.2"
```

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–µ–π—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏
‚úÖ API –Ω–µ –∏–∑–º–µ–Ω–µ–Ω
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
