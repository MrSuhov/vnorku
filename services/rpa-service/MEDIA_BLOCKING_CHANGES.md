# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ–¥–∏–∞

## –î–∞—Ç–∞: 2025-01-03

## –ü—Ä–æ–±–ª–µ–º–∞
–†–∞–Ω–µ–µ –≤—Å–µ –±—Ä–∞—É–∑–µ—Ä—ã, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ `SimpleUndetectedBrowser`, –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∑–∞–≥—Ä—É–∑–∫—É –º–µ–¥–∏–∞-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã, –≤–∏–¥–µ–æ) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –≠—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –¥–≤–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **QR-–∫–æ–¥—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å** –≤ —Ñ–ª–æ—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞)
2. **–ü–æ–ø-–∞–ø—ã –º–æ–≥–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å** –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –õ–°–î

## –†–µ—à–µ–Ω–∏–µ
–î–æ–±–∞–≤–ª–µ–Ω–∞ **–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ–¥–∏–∞** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `block_media`:

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `simple_browser_manager.py` –∏ `cdp_cookie_manager.py`

**–î–ª—è SimpleUndetectedBrowser (`simple_browser_manager.py`):**
```python
def create_simple_browser(
    headless: bool = False, 
    mobile_mode: bool = False, 
    block_media: bool = False  # –ù–û–í–´–ô –ü–ê–†–ê–ú–ï–¢–†
) -> uc.Chrome:
```

**–î–ª—è CDPCookieManager (`cdp_cookie_manager.py`):**
```python
def setup_browser_with_cdp(
    window_size: str = "2560,1600",
    headless: bool = None,
    block_media: bool = False  # –ù–û–í–´–ô –ü–ê–†–ê–ú–ï–¢–†
) -> webdriver.Chrome:
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä `block_media`:**
- `False` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –º–µ–¥–∏–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ (–¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å QR-–∫–æ–¥–∞–º–∏)
- `True` - –º–µ–¥–∏–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (–¥–ª—è performance –≤ –ø–æ–∏—Å–∫–µ —Ç–æ–≤–∞—Ä–æ–≤)

**–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**

*SimpleUndetectedBrowser:*
- –ï—Å–ª–∏ `block_media=True`: –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —à—Ä–∏—Ñ—Ç—ã, –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ CDP `Network.setBlockedURLs`
- –ï—Å–ª–∏ `block_media=False`: –≤—Å–µ –º–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ

*CDPCookieManager:*
- –ï—Å–ª–∏ `block_media=True`: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Chrome prefs + JavaScript injection
- –ï—Å–ª–∏ `block_media=False`: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `main.py`

#### 1. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 615 –∏ 627)

**CDP –±—Ä–∞—É–∑–µ—Ä (Ozon, –°–∞–º–æ–∫–∞—Ç):**
```python
driver = cdp_manager.setup_browser_with_cdp(block_media=True)
```

**SIMPLE –±—Ä–∞—É–∑–µ—Ä (–ê—à–∞–Ω, –ú–∞–≥–Ω–∏—Ç):**
```python
driver = SimpleUndetectedBrowser.create_simple_browser(
    headless=settings.rpa_headless,
    mobile_mode=mobile_mode,
    block_media=True  # PERFORMANCE MODE –¥–ª—è –ø–æ–∏—Å–∫–∞
)
```

#### 2. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Å—Ç—Ä–æ–∫–∞ 3101 –∏ 3110)

**CDP –±—Ä–∞—É–∑–µ—Ä (Ozon):**
```python
driver = cdp_manager.setup_browser_with_cdp()
# block_media –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º = False –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = QR —Ä–∞–±–æ—Ç–∞—é—Ç
```

**SIMPLE –±—Ä–∞—É–∑–µ—Ä (–Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞):**
```python
driver = SimpleUndetectedBrowser.create_simple_browser(
    headless=settings.rpa_headless,
    mobile_mode=mobile_mode
    # block_media –ù–ï —É–∫–∞–∑—ã–≤–∞–µ–º = –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –¥–ª—è QR
)
```

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –º–µ–¥–∏–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ (QR-–∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç)
- **–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤**: –º–µ–¥–∏–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞)
- **–ü–æ–ø-–∞–ø—ã**: —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è Chrome)

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
‚úÖ –ü–æ–ª–Ω–∞—è - —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `block_media` –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ (–º–µ–¥–∏–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—Ç–∞—Ç—É—Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:
- `üö´ PERFORMANCE MODE: Media blocking ENABLED` - –º–µ–¥–∏–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ
- `üñºÔ∏è NORMAL MODE: Media blocking DISABLED` - –º–µ–¥–∏–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:
1. ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å QR-–∫–æ–¥–æ–º (–Ø–Ω–¥–µ–∫—Å –õ–∞–≤–∫–∞)
2. ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –≤ –ø–æ–∏—Å–∫–µ (–ê—à–∞–Ω - –≤–æ–∑—Ä–∞—Å—Ç)
3. ‚úÖ –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –º–µ–¥–∏–∞
4. ‚úÖ –û–±—â—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- üéØ **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É per-use-case
- ‚ö° **Performance**: –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä—ã–º (–º–µ–¥–∏–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è)
- üñºÔ∏è **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: QR-–∫–æ–¥—ã –∏ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- üîÑ **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –Ω–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
